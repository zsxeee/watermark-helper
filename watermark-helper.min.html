<!DOCTYPE html><html lang=zh><head><meta charset=UTF-8><title>水印助手</title><meta content="width=device-width,initial-scale=1" name=viewport><style>body{margin:0}img{border:3px solid #2c3e50;border-radius:5px;width:100%;box-sizing:border-box}canvas{width:100%;max-width:60vh;height:0}a,label{display:flex;align-items:center;margin-top:8px}</style></head><body><canvas></canvas><div><input id=upload-input type=file accept=image/*><label>水印文字： <input id=content type=text value=仅供XX实名认证使用></label><label>水印颜色： <input id=color type=color value=#ffffff></label><label>不透明度： <input id=alpha type=range value=50 max=100 min=10></label><label>水印大小比： <input id=size type=range value=5 max=10 min=3></label><label>水印间隔比： <input id=gap type=range value=150 max=300 min=20></label><label>水印字体： <input id=font type=text value=sans-serif></label><a download href="javascript:alert('请先打开图片')">保存图片</a></div><script>var img=null;function repaint(){if(img){var e=document.getElementsByTagName("canvas")[0].getContext("2d");e.canvas.width=img.width,e.canvas.height=img.height;var t=Math.max(img.height,img.width);e.canvas.style.height=img.height/img.width*100+"%",e.restore(),e.drawImage(img,0,0),e.fillStyle=document.getElementById("color").value,e.globalAlpha=document.getElementById("alpha").value/100;var a=document.getElementById("size").value*t/100;e.font=a+'px "'+document.getElementById("font").value+'"',e.textBaseline="middle",e.rotate(-45*Math.PI/180);var n=a*document.getElementById("gap").value/100,i=document.getElementById("content").value;if(i.length){for(var m=Math.sqrt(t*t*2),g=e.measureText(i).width,l=-t,d=!1;l<=m;l+=a+n,d=!d)for(var r=-t-(d?g/2:0);r<=m+(d?g/2:0);r+=g+a)e.fillText(i,r,l);document.getElementsByTagName("a")[0].href=e.canvas.toDataURL()}}}document.getElementById("upload-input").addEventListener("change",function(e){if(e.target.files.length){var t=e.target.files[0];createImageBitmap(t).then(function(e){img=e,repaint()})}}),document.addEventListener("input",function(e){"file"!==e.target.type&&repaint()}),"createImageBitmap"in window||(window.createImageBitmap=function(n){return new Promise(function(e,t){var a=document.createElement("img");a.addEventListener("load",function(){e(this)}),a.src=URL.createObjectURL(n)})})</script></body></html>